<ng-container>
  <form *ngIf="form" (ngSubmit)="submit()" [formGroup]="form">
    <h2 *ngIf="label">{{ label }}</h2>

    <div [fxLayout]="direction" fxLayoutGap="1rem">
      <ng-container #formOutlet></ng-container>
    </div>

    <ng-container *ngIf="showControls">
      <div class="spacer"></div>
      <div fxLayout fxLayoutGap="1rem">
        <button
          *ngIf="submitButtonBadgeLabel !== null"
          mat-raised-button
          [matBadge]="submitButtonBadgeLabel"
          matBadgePosition="below before"
          matBadgeColor="accent"
          color="primary"
          [disabled]="!isValid || disabled"
          type="submit"
        >
          <mat-icon *ngIf="submitButtonIcon">{{ submitButtonIcon }}</mat-icon>
          {{ submitButtonLabel }}
        </button>

        <button
          *ngIf="submitButtonBadgeLabel === null"
          mat-raised-button
          color="primary"
          [disabled]="!isValid || disabled"
          type="submit"
        >
          <mat-icon *ngIf="submitButtonIcon">{{ submitButtonIcon }}</mat-icon>
          {{ submitButtonLabel }}
        </button>

        <button
          type="button"
          mat-raised-button
          [disabled]="form.pristine"
          (click)="cancel()"
        >
          {{ cancelButtonLabel }}
        </button>
      </div>
    </ng-container>
    <button type="submit" style="display: none"></button>
  </form>
</ng-container>

<!--<ng-template #dynamicElement let-formElement>-->
<!--  <ng-container [ngSwitch]="getControlType(formElement)">-->
<!--    <ng-container *ngSwitchCase="CONTROL_TYPE.FORM_GROUP">-->
<!--      <ng-container [ngTemplateOutlet]="formGroup"-->
<!--                    [ngTemplateOutletContext]="{ $implicit: formElement }"></ng-container>-->
<!--    </ng-container>-->

<!--    &lt;!&ndash; These are NOT questions! &ndash;&gt;-->
<!--    <ng-container *ngSwitchCase="CONTROL_TYPE.FORM_HINT">-->
<!--      <ng-container [ngTemplateOutlet]="hint"-->
<!--                    [ngTemplateOutletContext]="{ $implicit: formElement }"></ng-container>-->
<!--    </ng-container>-->

<!--    &lt;!&ndash;      <ng-container *ngSwitchCase="CONTROL_TYPE.GIST">&ndash;&gt;-->
<!--    &lt;!&ndash;        <slf-gist&ndash;&gt;-->
<!--    &lt;!&ndash;          [fileGists]="asGist(question).fileGists"></slf-gist>&ndash;&gt;-->
<!--    &lt;!&ndash;      </ng-container>&ndash;&gt;-->

<!--    <ng-container *ngSwitchCase="CONTROL_TYPE.BUTTON">-->
<!--      <ng-container [ngTemplateOutlet]="button"-->
<!--                    [ngTemplateOutletContext]="{ $implicit: formElement }"></ng-container>-->
<!--    </ng-container>-->

<!--    &lt;!&ndash; Anything not a form group, button, hint or gist, is a question &ndash;&gt;-->
<!--    <ng-container *ngSwitchDefault>-->
<!--      <ng-container [ngTemplateOutlet]="question"-->
<!--                    [ngTemplateOutletContext]="{ $implicit: formElement }"></ng-container>-->
<!--    </ng-container>-->
<!--  </ng-container>-->
<!--</ng-template>-->

<!--<ng-template #reactive let-formElements="formElements">-->
<!--  <ng-container *ngFor="let formElement of (formElements | async)">-->
<!--    <ng-container [ngTemplateOutlet]="dynamicElement"-->
<!--                  [ngTemplateOutletContext]="{ $implicit: formElement }"></ng-container>-->
<!--  </ng-container>-->
<!--</ng-template>-->

<!--<ng-template #formGroup let-formElement>-->
<!--  <slf-dynamic-form-group-->
<!--    [rootNode]="false"-->
<!--    [key]="formElement.key"-->
<!--    [direction]="formElement.direction"-->
<!--    [label]="formElement.label"-->
<!--    [form]="groupByKey(formElement.key)"-->
<!--    [formElements]="formElement.formElements"></slf-dynamic-form-group>-->
<!--</ng-template>-->

<!--<ng-template #hint let-formElement>-->
<!--  <slf-form-hint-->
<!--    [hint]="formElement.hint"-->
<!--    [heading]="formElement.heading"></slf-form-hint>-->
<!--</ng-template>-->

<!--<ng-template #question let-formElement>-->
<!--  <slf-dynamic-form-question-->
<!--    [form]="form"-->
<!--    (clearArguments)="clearArguments($event)"-->
<!--    (refreshLinkedQuestion)="refreshLinkedQuestion($event)"-->
<!--    [question]="formElement"></slf-dynamic-form-question>-->
<!--</ng-template>-->

<!--<ng-template #button let-formElement>-->
<!--  <slf-button-->
<!--    [action]="formElement.action"-->
<!--    [label]="formElement.label"-->
<!--    [icon]="formElement.icon"-->
<!--    [color]="formElement.color"-->
<!--    [raised]="formElement.raised"></slf-button>-->
<!--</ng-template>-->
